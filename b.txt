<asp:HiddenField 
    ID="hfAiAppliedFields" 
    runat="server" />


function markAiField(id: string) {
  const el = document.getElementById(id);
  if (!el) return;

  el.classList.add("ai-highlight");

  const hf = document.getElementById("MainContent_hfAiAppliedFields") as HTMLInputElement;
  const set = new Set((hf.value || "").split(",").filter(Boolean));
  set.add(id);
  hf.value = Array.from(set).join(",");
}




function reapplyAiHighlights() {
  const hf = document.getElementById("MainContent_hfAiAppliedFields") as HTMLInputElement;
  if (!hf?.value) return;

  hf.value.split(",").forEach(id => {
    const el = document.getElementById(id);
    el?.classList.add("ai-highlight");
  });
}
=====================

if ((window as any).Sys?.WebForms?.PageRequestManager) {
  const prm = (window as any).Sys.WebForms.PageRequestManager.getInstance();
  prm.add_endRequest(() => reapplyAiHighlights());
}
