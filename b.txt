import { reapplyAiHighlights } from "./dom/highlight";

// 1️⃣ Run once on initial page load
window.addEventListener("load", () => {
  reapplyAiHighlights();
  hookWebFormsPostbacks();
});

function hookWebFormsPostbacks() {
  const w = window as any;

  if (!w.Sys?.WebForms?.PageRequestManager) {
    return; // not a WebForms page
  }

  const prm = w.Sys.WebForms.PageRequestManager.getInstance();

  prm.add_endRequest(() => {
    reapplyAiHighlights();
  });
}
