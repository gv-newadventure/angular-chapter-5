Got it üëç
You want this behavior **only in the ‚Äúno vendor match‚Äù case**:

1. **The ‚ÄúVendor name (from invoice)‚Äù row is hidden by default**
2. **When no vendor match happens**:

   * Show that field
   * Populate it with `vendorText` extracted from the invoice JSON
3. **When there *is* a match**:

   * Keep it hidden

This fits perfectly with what you already have.

---

## 1Ô∏è‚É£ ASPX markup (confirm / minimal change)

You already added the textbox ‚Äî just make sure it has a stable container ID.

```html
<div id="rowVendorNameFromInvoice" style="display:none;">
  <label>Vendor name (from invoice):</label>
  <input
    type="text"
    id="txtVendorNameFromInvoice"
    class="form-control"
    readonly="readonly" />
</div>
```

‚úÖ Hidden by default
‚úÖ Read-only (important)

---

## 2Ô∏è‚É£ Small DOM helpers (TypeScript)

`dom/visibility.ts`

```ts
export function showById(id: string): void {
  const el = document.getElementById(id);
  if (el) el.style.display = "";
}

export function hideById(id: string): void {
  const el = document.getElementById(id);
  if (el) el.style.display = "none";
}
```

`dom/inputs.ts`

```ts
export function setInputValueById(id: string, value: string): void {
  const el = document.getElementById(id) as HTMLInputElement | null;
  if (el) el.value = value;
}
```

---

## 3Ô∏è‚É£ Show + populate ONLY when no vendor match

Update your **no-match dialog logic**:

`vendor/vendorNoMatch.ts`

```ts
import { ExtractedDocumentData } from "../types/invoiceTypes";
import { showById } from "../dom/visibility";
import { setInputValueById } from "../dom/inputs";

export function handleVendorNoMatch(data: ExtractedDocumentData): void {
  const vendorText = data.invoice?.vendorText?.trim();

  if (vendorText) {
    showById("rowVendorNameFromInvoice");
    setInputValueById("txtVendorNameFromInvoice", vendorText);
  }
}
```

---

## 4Ô∏è‚É£ Hide it again when vendor *is* matched

Wherever you handle **exact / fuzzy vendor selection success**:

```ts
import { hideById } from "../dom/visibility";

export function handleVendorMatched(): void {
  hideById("rowVendorNameFromInvoice");
}
```

Call this after:

* Exact match auto-apply
* User selects a vendor from the popup

---

## 5Ô∏è‚É£ Where this fits in your flow (important)

```ts
if (vendorMatchType === "no_match") {
  handleVendorNoMatch(extractedData);
  showVendorNoMatchDialog(extractedData);
}

if (vendorMatchType === "exact") {
  handleVendorMatched();
}

if (vendorMatchType === "fuzzy") {
  handleVendorMatched();
  showVendorDialog(candidates);
}
```

---

## ‚úÖ Result (matches your screenshot intent)

* ‚úî Field hidden during normal invoice entry
* ‚úî Field appears **only** when AI fails to match vendor
* ‚úî Shows extracted vendor text clearly
* ‚úî No legacy `window.ai_*` calls
* ‚úî Fully TypeScript-owned behavior

---

If you want next:

* Auto-focus Vendor search after OK
* Greyed styling for ‚Äúfrom invoice‚Äù fields
* Tooltip: *‚ÄúExtracted from invoice document‚Äù*

Say the word üëç
